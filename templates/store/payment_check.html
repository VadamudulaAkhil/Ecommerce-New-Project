{% extends 'store/main.html' %}
{% block content %}


<div class="contianer mx-auto p-6">
    <div class="max-w-lg mx-auto bg-white shadow-lg rounded-lg p-6">
        <br>
        <h3 style="text-align: center;">items : {{ order.get_cart }}</h3>
        <h3 style="text-align: center;">Total : â‚¹{{ order.get_cart_total|floatformat:2 }}</h3>
        <br>
        <a href="{% url 'Checkout' %}"><h5 style="float: right; margin-top:-130px; margin-right: 10px; font-size: 20px;" class="btn btn-primary">Back</h5></a>
    <button id="rzp-button1" class="btn btn-success" style="margin-left: 50%;">Pay Now</button>
    <br>
    <br>
    <br>
    </div>
</div>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    // document.getElementById('rzp-button1').addEventListener('click' , async function() {
    //     let response = await fetch(`/create-payment/{{ order.id }}/`, {method:'POST'})
    //     let data = await response.json()


    var options = {
        "key": "rzp_test_LYBUASWfyZDinq",
        "amount": "560000",
        "currency": "INR",
        "name": "Ecommerce",
        "description": "Test transaction",
        "handler": function (response){
            alert(response.razorpay_payment_id);
        },
        "prefill": {
            "name": "Test User",
            "email": "test@example.com",
            "contact": "9999999999"
        },
        "theme": {
            "color": "#528FF0"
        }
    };

    document.getElementById('rzp-button1').onclick = function(e){
        var rzp = new Razorpay(options);
        rzp.open();
        e.preventDefault();
    }
// })
</script>




{% endblock content %}